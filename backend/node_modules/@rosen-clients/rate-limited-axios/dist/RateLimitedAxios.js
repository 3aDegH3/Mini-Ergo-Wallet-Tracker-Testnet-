import originalAxios from 'axios';
import { RateLimitedAxiosConfig } from './config';
class RateLimitedAxios extends originalAxios.Axios {
    static releaseTimeoutMap = new Map();
    constructor(config) {
        super(originalAxios.mergeConfig(originalAxios.defaults, config || {}));
        this.interceptors.request.use(RateLimitedAxios.interceptorForRequest);
        this.interceptors.response.use(RateLimitedAxios.interceptorForResponse, RateLimitedAxios.interceptorForResponseError);
    }
    /**
     * Releases the request queue associated with the given Axios request configuration.
     * @param config
     * @returns
     */
    static releaseQueue = (config) => {
        const url = config.url ?? '';
        if (config.meta.release) {
            const release = config.meta.release;
            config.meta.release = undefined;
            const rule = RateLimitedAxios.getUrlRule(url);
            let releaseTime = 0;
            if (rule)
                releaseTime = rule.throttleWindow * 1000;
            clearTimeout(RateLimitedAxios.releaseTimeoutMap.get(release));
            RateLimitedAxios.releaseTimeoutMap.delete(release);
            setTimeout(() => {
                // release the locked queue
                release();
            }, releaseTime);
        }
    };
    /**
     * This function manages rate limiting for requests by matching URLs against regex patterns.
     * @param config
     * @returns
     */
    static interceptorForRequest = async (config) => {
        const url = config.url ?? '';
        const rule = RateLimitedAxios.getUrlRule(url);
        if (!rule)
            return config;
        const key = rule.pattern.toString();
        const release = await rule.semaphore.acquire();
        config.meta = { release: release, startedTime: Date.now() };
        RateLimitedAxios.releaseTimeoutMap.set(release, setTimeout(() => {
            RateLimitedAxiosConfig.getLogger().debug(`The response time has exceeded the defined limit for the ${key} URL pattern`);
            RateLimitedAxios.releaseQueue(config);
        }, rule.timeout * 1000));
        return config;
    };
    /**
     * Axios response interceptor that triggers queue release logic.
     * @param response
     * @returns
     */
    static interceptorForResponse = (response) => {
        this.releaseQueue(response.config);
        return response;
    };
    /**
     * Axios error interceptor that handles failed responses by releasing the request queue.
     * @param error
     * @returns
     */
    static interceptorForResponseError = (error) => {
        if (error.config)
            this.releaseQueue(error.config);
        return Promise.reject(error);
    };
    /**
     * return rate limiter and pattern of received url
     * @param url
     * @returns
     */
    static getUrlRule = (url) => {
        for (const rule of RateLimitedAxiosConfig.getRules()) {
            if (rule.pattern.test(url))
                return rule;
        }
    };
    /**
     * Create a rate-limited axios instance
     * @param config
     * @returns
     */
    create = (config = {}) => {
        const axiosInstance = new RateLimitedAxios(originalAxios.mergeConfig(this.defaults, config || {}));
        return axiosInstance;
    };
}
/**
 * Create a rate-limited axios instance
 * @param config
 * @returns
 */
const create = (config = {}) => {
    const axiosInstance = new RateLimitedAxios(config);
    return axiosInstance;
};
export { create, RateLimitedAxios, RateLimitedAxiosConfig };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUmF0ZUxpbWl0ZWRBeGlvcy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL2xpYi9SYXRlTGltaXRlZEF4aW9zLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sYUFLTixNQUFNLE9BQU8sQ0FBQztBQUNmLE9BQU8sRUFBRSxzQkFBc0IsRUFBRSxNQUFNLFVBQVUsQ0FBQztBQVNsRCxNQUFNLGdCQUFpQixTQUFRLGFBQWEsQ0FBQyxLQUFLO0lBQ3RDLE1BQU0sQ0FBQyxpQkFBaUIsR0FBRyxJQUFJLEdBQUcsRUFHekMsQ0FBQztJQUVKLFlBQVksTUFBMkI7UUFDckMsS0FBSyxDQUNILGFBQWEsQ0FBQyxXQUFXLENBQ3ZCLGFBQWEsQ0FBQyxRQUE4QixFQUM1QyxNQUFNLElBQUksRUFBRSxDQUNiLENBQ0YsQ0FBQztRQUNGLElBQUksQ0FBQyxZQUFZLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxnQkFBZ0IsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDO1FBQ3RFLElBQUksQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FDNUIsZ0JBQWdCLENBQUMsc0JBQXNCLEVBQ3ZDLGdCQUFnQixDQUFDLDJCQUEyQixDQUM3QyxDQUFDO0lBQ0osQ0FBQztJQUVEOzs7O09BSUc7SUFDTyxNQUFNLENBQUMsWUFBWSxHQUFHLENBQUMsTUFBa0MsRUFBRSxFQUFFO1FBQ3JFLE1BQU0sR0FBRyxHQUFHLE1BQU0sQ0FBQyxHQUFHLElBQUksRUFBRSxDQUFDO1FBRTdCLElBQUksTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQztZQUN4QixNQUFNLE9BQU8sR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQztZQUNwQyxNQUFNLENBQUMsSUFBSSxDQUFDLE9BQU8sR0FBRyxTQUFTLENBQUM7WUFDaEMsTUFBTSxJQUFJLEdBQUcsZ0JBQWdCLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQzlDLElBQUksV0FBVyxH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QUNILE1BQU0sTUFBTSxHQUFHLENBQUMsU0FBNkIsRUFBRSxFQUFFLEVBQUU7SUFDakQsTUFBTSxhQUFhLEdBQUcsSUFBSSxnQkFBZ0IsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUNuRCxPQUFPLGFBQWEsQ0FBQztBQUN2QixDQUFDLENBQUM7QUFFRixPQUFPLEVBQUUsTUFBTSxFQUFFLGdCQUFnQixFQUFFLHNCQUFzQixFQUFFLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgb3JpZ2luYWxBeGlvcywge1xuICBBeGlvc0Vycm9yLFxuICBBeGlvc1JlcXVlc3RDb25maWcsXG4gIEF4aW9zUmVzcG9uc2UsXG4gIEludGVybmFsQXhpb3NSZXF1ZXN0Q29uZmlnLFxufSBmcm9tICdheGlvcyc7XG5pbXBvcnQgeyBSYXRlTGltaXRlZEF4aW9zQ29uZmlnIH0gZnJvbSAnLi9jb25maWcnO1xuaW1wb3J0IHsgUnVsZSB9IGZyb20gJy4vdHlwZXMnO1xuXG5kZWNsYXJlIG1vZHVsZSAnYXhpb3MnIHtcbiAgZXhwb3J0IGludGVyZmFjZSBJbnRlcm5hbEF4aW9zUmVxdWVzdENvbmZpZyB7XG4gICAgbWV0YTogeyByZWxlYXNlOiAoKCkgPT4gdm9pZCkgfCB1bmRlZmluZWQ7IHN0YXJ0ZWRUaW1lOiBudW1iZXIgfTtcbiAgfVxufVxuXG5jbGFzcyBSYXRlTGltaXRlZEF4aW9zIGV4dGVuZHMgb3JpZ2luYWxBeGlvcy5BeGlvcyB7XG4gIHByb3RlY3RlZCBzdGF0aWMgcmVsZWFzZVRpbWVvdXRNYXAgPSBuZXcgTWFwPFxuICAgICgpID0+IHZvaWQsXG4gICAgUmV0dXJuVHlwZTx0eXBlb2Ygc2V0VGltZW91dD5cbiAgPigpO1xuXG4gIGNvbnN0cnVjdG9yKGNvbmZpZz86IEF4aW9zUmVxdWVzdENvbmZpZykge1xuICAgIHN1cGVyKFxuICAgICAgb3JpZ2luYWxBeGlvcy5tZXJnZUNvbmZpZyhcbiAgICAgICAgb3JpZ2luYWxBeGlvcy5kZWZhdWx0cyBhcyBBeGlvc1JlcXVlc3RDb25maWcsXG4gICAgICAgIGNvbmZpZyB8fCB7fVxuICAgICAgKVxuICAgICk7XG4gICAgdGhpcy5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoUmF0ZUxpbWl0ZWRBeGlvcy5pbnRlcmNlcHRvckZvclJlcXVlc3QpO1xuICAgIHRoaXMuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLnVzZShcbiAgICAgIFJhdGVMaW1pdGVkQXhpb3MuaW50ZXJjZXB0b3JGb3JSZXNwb25zZSxcbiAgICAgIFJhdGVMaW1pdGVkQXhpb3MuaW50ZXJjZXB0b3JGb3JSZXNwb25zZUVycm9yXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWxlYXNlcyB0aGUgcmVxdWVzdCBxdWV1ZSBhc3NvY2lhdGVkIHdpdGggdGhlIGdpdmVuIEF4aW9zIHJlcXVlc3QgY29uZmlndXJhdGlvbi5cbiAgICogQHBhcmFtIGNvbmZpZ1xuICAgKiBAcmV0dXJuc1xuICAgKi9cbiAgcHJvdGVjdGVkIHN0YXRpYyByZWxlYXNlUXVldWUgPSAoY29uZmlnOiBJbnRlcm5hbEF4aW9zUmVxdWVzdENvbmZpZykgPT4ge1xuICAgIGNvbnN0IHVybCA9IGNvbmZpZy51cmwgPz8gJyc7XG5cbiAgICBpZiAoY29uZmlnLm1ldGEucmVsZWFzZSkge1xuICAgICAgY29uc3QgcmVsZWFzZSA9IGNvbmZpZy5tZXRhLnJlbGVhc2U7XG4gICAgICBjb25maWcubWV0YS5yZWxlYXNlID0gdW5kZWZpbmVkO1xuICAgICAgY29uc3QgcnVsZSA9IFJhdGVMaW1pdGVkQXhpb3MuZ2V0VXJsUnVsZSh1cmwpO1xuICAgICAgbGV0IHJlbGVhc2VUaW1lID0gMDtcbiAgICAgIGlmIChydWxlKSByZWxlYXNlVGltZSA9IHJ1bGUudGhyb3R0bGVXaW5kb3cgKiAxMDAwO1xuICAgICAgY2xlYXJUaW1lb3V0KFJhdGVMaW1pdGVkQXhpb3MucmVsZWFzZVRpbWVvdXRNYXAuZ2V0KHJlbGVhc2UpKTtcbiAgICAgIFJhdGVMaW1pdGVkQXhpb3MucmVsZWFzZVRpbWVvdXRNYXAuZGVsZXRlKHJlbGVhc2UpO1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIC8vIHJlbGVhc2UgdGhlIGxvY2tlZCBxdWV1ZVxuICAgICAgICByZWxlYXNlKCk7XG4gICAgICB9LCByZWxlYXNlVGltZSk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBUaGlzIGZ1bmN0aW9uIG1hbmFnZXMgcmF0ZSBsaW1pdGluZyBmb3IgcmVxdWVzdHMgYnkgbWF0Y2hpbmcgVVJMcyBhZ2FpbnN0IHJlZ2V4IHBhdHRlcm5zLlxuICAgKiBAcGFyYW0gY29uZmlnXG4gICAqIEByZXR1cm5zXG4gICAqL1xuICBwcm90ZWN0ZWQgc3RhdGljIGludGVyY2VwdG9yRm9yUmVxdWVzdCA9IGFzeW5jIChcbiAgICBjb25maWc6IEludGVybmFsQXhpb3NSZXF1ZXN0Q29uZmlnXG4gICkgPT4ge1xuICAgIGNvbnN0IHVybCA9IGNvbmZpZy51cmwgPz8gJyc7XG4gICAgY29uc3QgcnVsZSA9IFJhdGVMaW1pdGVkQXhpb3MuZ2V0VXJsUnVsZSh1cmwpO1xuXG4gICAgaWYgKCFydWxlKSByZXR1cm4gY29uZmlnO1xuXG4gICAgY29uc3Qga2V5ID0gcnVsZS5wYXR0ZXJuLnRvU3RyaW5nKCk7XG4gICAgY29uc3QgcmVsZWFzZSA9IGF3YWl0IHJ1bGUuc2VtYXBob3JlLmFjcXVpcmUoKTtcbiAgICBjb25maWcubWV0YSA9IHsgcmVsZWFzZTogcmVsZWFzZSwgc3RhcnRlZFRpbWU6IERhdGUubm93KCkgfTtcblxuICAgIFJhdGVMaW1pdGVkQXhpb3MucmVsZWFzZVRpbWVvdXRNYXAuc2V0KFxuICAgICAgcmVsZWFzZSxcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBSYXRlTGltaXRlZEF4aW9zQ29uZmlnLmdldExvZ2dlcigpLmRlYnVnKFxuICAgICAgICAgIGBUaGUgcmVzcG9uc2UgdGltZSBoYXMgZXhjZWVkZWQgdGhlIGRlZmluZWQgbGltaXQgZm9yIHRoZSAke2tleX0gVVJMIHBhdHRlcm5gXG4gICAgICAgICk7XG4gICAgICAgIFJhdGVMaW1pdGVkQXhpb3MucmVsZWFzZVF1ZXVlKGNvbmZpZyk7XG4gICAgICB9LCBydWxlLnRpbWVvdXQgKiAxMDAwKVxuICAgICk7XG5cbiAgICByZXR1cm4gY29uZmlnO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBeGlvcyByZXNwb25zZSBpbnRlcmNlcHRvciB0aGF0IHRyaWdnZXJzIHF1ZXVlIHJlbGVhc2UgbG9naWMuXG4gICAqIEBwYXJhbSByZXNwb25zZVxuICAgKiBAcmV0dXJuc1xuICAgKi9cbiAgcHJvdGVjdGVkIHN0YXRpYyBpbnRlcmNlcHRvckZvclJlc3BvbnNlID0gKHJlc3BvbnNlOiBBeGlvc1Jlc3BvbnNlKSA9PiB7XG4gICAgdGhpcy5yZWxlYXNlUXVldWUocmVzcG9uc2UuY29uZmlnKTtcbiAgICByZXR1cm4gcmVzcG9uc2U7XG4gIH07XG5cbiAgLyoqXG4gICAqIEF4aW9zIGVycm9yIGludGVyY2VwdG9yIHRoYXQgaGFuZGxlcyBmYWlsZWQgcmVzcG9uc2VzIGJ5IHJlbGVhc2luZyB0aGUgcmVxdWVzdCBxdWV1ZS5cbiAgICogQHBhcmFtIGVycm9yXG4gICAqIEByZXR1cm5zXG4gICAqL1xuICBwcm90ZWN0ZWQgc3RhdGljIGludGVyY2VwdG9yRm9yUmVzcG9uc2VFcnJvciA9IChlcnJvcjogQXhpb3NFcnJvcikgPT4ge1xuICAgIGlmIChlcnJvci5jb25maWcpIHRoaXMucmVsZWFzZVF1ZXVlKGVycm9yLmNvbmZpZyk7XG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTtcbiAgfTtcblxuICAvKipcbiAgICogcmV0dXJuIHJhdGUgbGltaXRlciBhbmQgcGF0dGVybiBvZiByZWNlaXZlZCB1cmxcbiAgICogQHBhcmFtIHVybFxuICAgKiBAcmV0dXJuc1xuICAgKi9cbiAgcHJvdGVjdGVkIHN0YXRpYyBnZXRVcmxSdWxlID0gKHVybDogc3RyaW5nKTogUnVsZSB8IHVuZGVmaW5lZCA9PiB7XG4gICAgZm9yIChjb25zdCBydWxlIG9mIFJhdGVMaW1pdGVkQXhpb3NDb25maWcuZ2V0UnVsZXMoKSkge1xuICAgICAgaWYgKHJ1bGUucGF0dGVybi50ZXN0KHVybCkpIHJldHVybiBydWxlO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQ3JlYXRlIGEgcmF0ZS1saW1pdGVkIGF4aW9zIGluc3RhbmNlXG4gICAqIEBwYXJhbSBjb25maWdcbiAgICogQHJldHVybnNcbiAgICovXG4gIHB1YmxpYyBjcmVhdGUgPSAoY29uZmlnOiBBeGlvc1JlcXVlc3RDb25maWcgPSB7fSkgPT4ge1xuICAgIGNvbnN0IGF4aW9zSW5zdGFuY2UgPSBuZXcgUmF0ZUxpbWl0ZWRBeGlvcyhcbiAgICAgIG9yaWdpbmFsQXhpb3MubWVyZ2VDb25maWcoXG4gICAgICAgIHRoaXMuZGVmYXVsdHMgYXMgQXhpb3NSZXF1ZXN0Q29uZmlnLFxuICAgICAgICBjb25maWcgfHwge31cbiAgICAgIClcbiAgICApO1xuICAgIHJldHVybiBheGlvc0luc3RhbmNlO1xuICB9O1xufVxuXG4vKipcbiAqIENyZWF0ZSBhIHJhdGUtbGltaXRlZCBheGlvcyBpbnN0YW5jZVxuICogQHBhcmFtIGNvbmZpZ1xuICogQHJldHVybnNcbiAqL1xuY29uc3QgY3JlYXRlID0gKGNvbmZpZzogQXhpb3NSZXF1ZXN0Q29uZmlnID0ge30pID0+IHtcbiAgY29uc3QgYXhpb3NJbnN0YW5jZSA9IG5ldyBSYXRlTGltaXRlZEF4aW9zKGNvbmZpZyk7XG4gIHJldHVybiBheGlvc0luc3RhbmNlO1xufTtcblxuZXhwb3J0IHsgY3JlYXRlLCBSYXRlTGltaXRlZEF4aW9zLCBSYXRlTGltaXRlZEF4aW9zQ29uZmlnIH07XG4iXX0=